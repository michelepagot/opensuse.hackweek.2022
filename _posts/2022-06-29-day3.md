---
layout: post
title:  "Day3 is cloudy"
date: 2022-06-29 10:27:17 -0000
author: michelepagot
---

<a onclick="window.history.back()">Back</a>

Today we rock with Wezterm

# DONE

## Hackweek webpage

### Posts images

Change from

```
![Image](/assets/img/wezterm_openqa_needle.png)
```

to

```
![Image]({{ "/assets/img/wezterm_openqa_needle.png" | relative_url }})
```


## openQA
Some fun progress on this side today.

### Needles

Talking with Stephan, he suggested this talk: [openSUSE Conference 2017 How openQA works](https://youtu.be/vGpH4SQ9rQo?t=455), needles are at 7min 30sec but the overall talk is just 30min.

Needles can be created directly in the openQA web interface


![Image]({{ "/assets/img/create_needle.png" | relative_url }})


There's a lot of knowledge and good practice to apply when developing your needles, let say that I start from something simple:

Here how the application look like in the test machine

![Image]({{ "/assets/img/wezterm_openqa_needle.png" | relative_url }})

and here how the needle match on it

![Image]({{ "/assets/img/wezterm_needle_tab_match.png" | relative_url }})

Even a so simple match sometime could fail

![Image]({{ "/assets/img/wezterm_no_tab.png" | relative_url }})

(tab missing)


New needles committed []().

### Test terminal

There's a generic function available to test terminals: [test_terminal](https://github.com/os-autoinst/os-autoinst-distri-opensuse/blob/master/tests/x11/xterm.pm).

![Image]({{ "/assets/img/wezterm_test_terminal.png" | relative_url }})

here the needle created for it

![Image]({{ "/assets/img/wezterm_test_terminal_needle_match.png" | relative_url }})

Otherwise, starting a program is as simple as [x11_start_program](http://open.qa/api/testapi/#_x11_start_program)

```
# start Wezterm
sub start() {
    switch_to_desktop();
    x11_start_program('wezterm');
    wait_still_screen 5;
}
```

Test [commit](https://github.com/mpagot/os-autoinst-distri-opensuse/commit/3982272a5bddb04f99eeca0069b881f5edd5372a) for this test.

### Test organization

It was 

![Image]({{ "/assets/img/wezterm_openqa_installed.png" | relative_url }})

With this [commit](https://github.com/mpagot/os-autoinst-distri-opensuse/commit/97ae82506f2c6abfd1ba234d014dfeffa2a9e6c5) it is now:

![Image]({{ "/assets/img/wezterm_tests_organized.png" | relative_url }})


## Wezterm

Start creating some simple tests about events triggered by key bindings: all available [defauld keys](https://wezfurlong.org/wezterm/config/default-keys.html) are documented.

Fer example test that a new tab is opened when pressing `SUPER-t`.

Contribute to documentation https://github.com/michelepagot/wezterm/commit/c2193571486665c74254a6decb0f9c144f87a09f


# TODO

## Hackweek webpage
* Create a new separate page where to start developing a hackweek presentation (reveal.js maybe)

## openQA
* Ask if it is possible to run the test on some existing openQA instance (maybe the o3 public one)
* Keep exploring [isotovideo](https://kalikiana.gitlab.io/post/2022-03-16-running-standandalone-tests-with-isotovideo/)

## Wezterm
* look at how to generate wezterm.lua
